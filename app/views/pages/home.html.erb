<div class="container">
  <div class="row">
    <div class="col-12 text-center logo-carr">
      <img class="img-fluid" src="https://i.ibb.co/CBtyrxS/logo-coworkers-6.png" alt="Coworkers-Logo">
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
      <form id="search-form" action="<%= workspaces_path %>" method="GET">
        <div class="search-container">
          <input type="text" id="search-input" class="search-input" placeholder="Où souhaitez-vous télétravailler?" type="button">
          <input type="hidden" id="search-query" name="query">
        </div>
          <div class="form-group col-sm-8">
    <div id="myMultiselect" class="multiselect">
      <div id="mySelectLabel" class="selectBox" onclick="toggleCheckboxArea()">
        <div class="overSelect"></div>
      </div>
      <div id="mySelectOptions">
        <input type="checkbox" id="calm" value="calm" class="tag-selector" />
          <label for="calm"> <i class="fa-solid fa-volume-high fa-2xl" style="color: #CDCBD2;"> </i> </label>
        <input type="checkbox" id="internet" value="internet" />
          <label for="internet"> <i class="fa-solid fa-wifi fa-2xl" style="color: #004792;"></i> </label>
        <input type="checkbox" id="smoking" value="smoking" />
          <label for="three"> <i class="fa-solid fa-smoking fa-2xl" style="color: #004792;"></i> </label>
        <input type="checkbox" id="animals" value="animals" />
          <label for="four"> <i class="fa-solid fa-dog fa-2xl" style="color: #004792;"></i></label>
        <input type="checkbox" id="five" value="five" />
         <label for="five"> <i class="fa-solid fa-wrench fa-2xl" style="color: #004792;"></i> </label>
      </div>
    </div>
  </div>
</div>
      </form>
    </div>
  </div>
</div>
<div class="container">
  <div class="mt-4">
    <h2 style="font-size: 20px;">Populaires</h2>
  </div>
</div>
<div class="container">
  <div class="row">
      <ul class="card-list">
        <% @workspaces.each do |workspace| %>
          <li><%= link_to workspace_path(workspace) do %>
            <article class="card">
              <img
                class="card__background"
                src=" <%= cl_image_path workspace.photos.first.key, width: 500, crop: :fill %>"
                alt="Photo d'un workspace"
                width="1920"
                height="2193"
              />
              <div class="card__content">
                <div class="card__content--container">
                  <h2 class="card__title"> <%= workspace.name %></h2>
                    <div class="divider">
                    </div>
                    <p class="card__description">
                      <%= workspace.ambiance %> | <%= workspace.smoking %> | <%= workspace.animals %>
                    </p>
                  </div>
                </div>
              </article>
            <% end %>
            </li>
          <% end %>
        </ul>
      </div>
    </div>
  </div>

<div class="container">
  <div class="mt-3">
    <h2 style="font-size: 35px;">Je souhaite proposer un workspace</h2>
  </div>
</div>
<div class="container">
    <div class="col-11 text-center">
          <div class="col-11 text-center">
            <a class="yellow-btn btn-home" href="<%= new_workspace_path %>">Ajouter un workspace</a>
      </div>
    </div>
</div>

<script>
document.addEventListener('turbo:load', () => {
  const searchInput = document.getElementById('search-input');
  const searchForm = document.getElementById('search-form');
  const searchQuery = document.getElementById('search-query');
  let isSecondClick = false;

  searchInput.addEventListener('click', () => {
    if (!isSecondClick) {
      isSecondClick = true;
      return;
    }

    handleSubmit();
  });

  searchInput.addEventListener('keydown', (event) => {
    if (event.key === 'Enter') {
      event.preventDefault();
      handleSubmit();
    }
  });

  searchForm.addEventListener('submit', (event) => {
    event.preventDefault();
  });

  function handleSubmit() {
    const inputValue = searchInput.value.trim();
    if (inputValue !== "") {
      searchQuery.value = inputValue;
      searchForm.submit();
      searchForm.reset();
      isSecondClick = false;
    }
  }
});
</script>
